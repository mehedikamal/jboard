(function(){var k,m,l;this.SEO=k={settings:{title:"",rel_author:"",meta:[],og:[],twitter:[],ignore:{meta:["fragment"],link:["stylesheet","icon","apple-touch-icon"]},auto:{twitter:!0,og:!0,set:["description","url","title"]}},ignore:function(a,d){if(this.settings.ignore[a]&&-1===_.indexOf(this.settings.ignore[a],d))return this.settings.ignore[a].push(d)},config:function(a){return _.extend(this.settings,a)},set:function(a,d){var c,b,e,f,k,g,h,l;null==d&&(d=!0);d&&this.clearAll();(c=Router.current())&&
(b=Router.url(c.route.getName(),c.params));g=a.meta;f=a.og;h=a.link;c=a.twitter;a.title&&this.setTitle(a.title);a.url?this.setUrl(a.url):b&&this.setUrl(b);if(g&&_.isArray(g))for(b=0,k=g.length;b<k;b++)l=g[b],this.setMeta("name='"+l.key+"'",l.value);else if(g&&_.isObject(g))for(e in g)b=g[e],this.setMeta("name='"+e+"'",b);if(f&&_.isArray(f))for(b=0,k=f.length;b<k;b++)g=f[b],this.setMeta("property='og:"+g.key+"'",g.value);else if(f&&_.isObject(f))for(e in f)b=f[e],this.setMeta("property='og:"+e+"'",
b);if(h&&_.isArray(h))for(b=0,g=h.length;b<g;b++)f=h[b],this.setLink(f.rel,f.href);else if(h&&_.isObject(h))for(e in h)b=h[e],this.setLink(e,b);if(c&&_.isArray(c))for(h=0,e=c.length;h<e;h++)g=c[h],this.setMeta("property='twitter:"+g.key+"'",g.value);else if(c&&_.isObject(c))for(e in c)b=c[e],this.setMeta("property='twitter:"+e+"'",b);if(a.rel_author)return this.setLink("author",a.rel_author)},clearAll:function(){var a,d,c,b,e,f;f=$("meta");c=0;for(e=f.length;c<e;c++)d=f[c],a=$(d),d=a.attr("name")||
a.attr("property"),b=!1,a.attr("name")&&-1<_.indexOf(k.settings.ignore.meta,a.attr("name"))?b=!0:a.attr("property")&&-1<_.indexOf(k.settings.ignore.meta,a.attr("property"))&&(b=!0),!b&&d&&a.remove();f=$("link");c=0;for(e=f.length;c<e;c++)d=f[c],a=$(d),d=a.attr("rel"),-1===_.indexOf(k.settings.ignore.link,a.attr("rel"))&&d&&a.remove();this.set(this.settings,!1);return this.setTitle(this.settings.title)},setTitle:function(a){document.title=a;if(-1!==_.indexOf(this.settings.auto.set,"title")&&(this.settings.auto.twitter&&
this.setMeta('property="twitter:title"',a),this.settings.auto.og))return this.setMeta('property="og:title"',a)},setUrl:function(a){if(-1!==_.indexOf(this.settings.auto.set,"url")&&(this.settings.auto.twitter&&this.setMeta('property="twitter:url"',a),this.settings.auto.og))return this.setMeta('property="og:url"',a)},setLink:function(a,d,c){var b,e;null==c&&(c=!0);c&&this.removeLink(a);if(_.isArray(d))for(b=0,e=d.length;b<e;b++)c=d[b],this.setLink(a,c,!1);else if(d)return $("head").append("<link rel='"+
a+"' href='"+d+"'>")},removeLink:function(a){return $("link[rel='"+a+"']").remove()},setMeta:function(a,d,c){var b,e;null==c&&(c=!0);c&&this.removeMeta(a);if(_.isArray(d))for(c=0,b=d.length;c<b;c++)e=d[c],this.setMeta(a,e,!1);else if(d&&(d=m(d),$("head").append("<meta "+a+" content='"+d+"'>"),a=a.replace(/"|'/g,"").split("=")[1],-1!==_.indexOf(this.settings.auto.set,a)&&(this.settings.auto.twitter&&this.setMeta("property='twitter:"+a+"'",d),this.settings.auto.og)))return this.setMeta("property='og:"+
a+"'",d)},removeMeta:function(a){return $("meta["+a+"]").remove()}};m=function(a){return(""+a).replace(/'/g,"&apos;").replace(/"/g,"&quot;")};l=function(){var a;if(a=Router.current())return a=a.route.getName()};Deps.autorun(function(){var a;if(a=l())return Meteor.subscribe("seoByRouteName",a)});Deps.autorun(function(){var a;if(k)return a=l(),a=SeoCollection.findOne({route_name:a})||{},k.set(a)})}).call(this);